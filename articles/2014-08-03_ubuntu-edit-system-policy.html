<!DOCTYPE html><html lang="fa"><head><link rel="manifest" href="/linuxiha/manifest.json"/><link rel="apple-touch-icon" href="/linuxiha/icon-512x512.png"/><link rel="apple-touch-icon" sizes="180x180" href="/linuxiha/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/linuxiha/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/linuxiha/favicon-16x16.png"/><meta name="msapplication-TileColor" content="#ce1919"/><meta name="theme-color" content="#ce1919"/><meta charSet="utf-8"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@site"/><meta name="twitter:creator" content="@handle"/><meta property="og:type" content="website"/><meta property="og:locale" content="fa_IR"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ویرایش system policy در اوبونتو</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="آموزش ویرایش system policy در اوبونتو"/><meta property="og:url" content="/articles/[slug]"/><meta property="og:title" content="ویرایش system policy در اوبونتو"/><meta property="og:description" content="آموزش ویرایش system policy در اوبونتو"/><meta property="og:image" content="https://shetabi.github.io/linuxiha/images/system_policy-1.png"/><meta property="og:image:alt" content="ویرایش system policy در اوبونتو"/><meta property="og:image:width" content="800"/><meta property="og:image:height" content="600"/><meta property="og:site_name" content="Linuxiha"/><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://shetabi.github.io/linuxiha/articles/2014-08-03_ubuntu-edit-system-policy"
    },
    "headline": "ویرایش system policy در اوبونتو",
    "image": [
      "https://shetabi.github.io/linuxiha/images/system_policy-1.png"
     ],
    "datePublished": "Sun Aug 03 2014 00:00:00 GMT+0000",
    "dateModified": "Sun Aug 03 2014 00:00:00 GMT+0000",
    "author": {"@type": "Person","name": "میثم ساکی"},
    "publisher": {
      "@type": "Organization",
      "name": "Linuxiha",
      "logo": {
        "@type": "ImageObject",
        "url": "https://shetabi.github.io/linuxiha/images/logo.png"
      }
    },
    "description": "آموزش ویرایش system policy در اوبونتو"
  }</script><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https://shetabi.github.io/linuxiha",
          "name": "لینوکسی ها"
        }
      },{
        "@type": "ListItem",
        "position": 2,
        "item": {
          "@id": "/linuxiha/learning",
          "name": "آموزشی"
        }
      },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https://shetabi.github.io/linuxiha/articles/2014-08-03_ubuntu-edit-system-policy",
          "name": "ویرایش system policy در اوبونتو"
        }
      }
     ]
  }</script><meta name="next-head-count" content="21"/><link rel="preload" href="/linuxiha/_next/static/css/994d05cfd08c9504.css" as="style"/><link rel="stylesheet" href="/linuxiha/_next/static/css/994d05cfd08c9504.css" data-n-g=""/><link rel="preload" href="/linuxiha/_next/static/css/15017f5b47a17df2.css" as="style"/><link rel="stylesheet" href="/linuxiha/_next/static/css/15017f5b47a17df2.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/linuxiha/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/linuxiha/_next/static/chunks/webpack-be8ce13bde5a1037.js" defer=""></script><script src="/linuxiha/_next/static/chunks/framework-dc33c0b5493501f0.js" defer=""></script><script src="/linuxiha/_next/static/chunks/main-d8378e38f83709b8.js" defer=""></script><script src="/linuxiha/_next/static/chunks/pages/_app-83428007a475fbdb.js" defer=""></script><script src="/linuxiha/_next/static/chunks/895-6255772e747cfd4e.js" defer=""></script><script src="/linuxiha/_next/static/chunks/120-f6cbf353236bf041.js" defer=""></script><script src="/linuxiha/_next/static/chunks/151-2230793e3639a1ed.js" defer=""></script><script src="/linuxiha/_next/static/chunks/pages/articles/%5Bslug%5D-a73beb958da58954.js" defer=""></script><script src="/linuxiha/_next/static/UlrhO1Nrloe8puAi1Ej19/_buildManifest.js" defer=""></script><script src="/linuxiha/_next/static/UlrhO1Nrloe8puAi1Ej19/_ssgManifest.js" defer=""></script><script src="/linuxiha/_next/static/UlrhO1Nrloe8puAi1Ej19/_middlewareManifest.js" defer=""></script></head><body dir="rtl" lang="fa"><div id="__next" data-reactroot=""><header class="header_container__U9LUF"><h2></h2><nav class="header_navbar__58BhK"><a href="/linuxiha">خانه</a><a href="/linuxiha/news">خبری</a><a href="/linuxiha/learning">آموزشی</a><a href="/linuxiha/about">درباره ما</a></nav><figure class="header_logo__Q4_m9"><img src="/linuxiha/images/logo.png" alt="linuxiha-logo"/></figure></header><div class="MuiPaper-root article_article__3tTrV MuiPaper-elevation1 MuiPaper-rounded"><img src="/linuxiha/images/system_policy-1.png" alt="ویرایش system policy در اوبونتو"/><h1>ویرایش system policy در اوبونتو</h1><div class="MuiCardHeader-root"><div class="MuiCardHeader-avatar"><div class="MuiAvatar-root MuiAvatar-circle article_avatar__ukeMN" aria-label="article"><img alt="میثم ساکی" src="authors/user.png" class="MuiAvatar-img"/></div></div><div class="MuiCardHeader-content"><span class="MuiTypography-root MuiCardHeader-title MuiTypography-body2 MuiTypography-displayBlock">میثم ساکی</span><span class="MuiTypography-root MuiCardHeader-subheader MuiTypography-body2 MuiTypography-colorTextSecondary MuiTypography-displayBlock">۷ سال قبل - زمان خواندن ۵ دقیقه</span></div></div><section class="article_content__5RXjl"><p>همان‌طور که می‌دانید در لینوکس تمام کارهایی که امکان دارد به‌گونه‌ای تاثیر روی کل سیستم بگذارد محدود و فقط در دسترس کاربری روت است.</p>
<p>در مطلب «<a href="http://linuxihaa.ir/sudo">sudo چیست؟</a>» به این مورد اشاره کردیم و گفتیم با دستوری مانند sudo در رابط خط‌فرمان می‌توان با کاربر عادی به این اعمال دسترسی داشت و در رابط گرافیکی نیز برنامه‌هایی در هر میزکار تعبیه شده‌اند که با نشان دادن کادرهای محاوره‌ای و درخواست رمز عبور، دسترسی به امکانات ممتاز سیستم را امکان پذیر می‌کنند.</p>
<p>به طور مثال هنگامی که قصد داریم پراکسی سیستم را در اوبونتو تغییر دهیم چون این یک عمل ممتاز در سیستم است کادر محاوره‌ای به شکل زیر باز شده و رمز کاربری را درخواست می‌کند.</p>
<p><img src="/linuxiha/images/system_policy-1.png" alt="system_policy-1"/></p>
<p>مشاهده می‌کنید که سیاست سیستم (system policy) پیغام داده که مانع انجام این کار می‌شود مگر این‌که رمز عبور را وارد کنید تا هویت شما تایید شود.</p>
<p>خب اگر بخواهیم این پیغام‌ها نمایش داده نشود و برخی اعمالی که خودمان می‌دانیم زیاد خطرناک نیستند (همه اعمال را نباید باز گذاشت) را بدون تایید هویت انجام دهیم باید چکار کنیم؟!</p>
<p>اول از همه گزینه Details در کادر را بزنید تا مشخصات این سیاست دیده شود.</p>
<p><img src="/linuxiha/images/system-policy-2.png" alt="system-policy-2"/></p>
<p>نام عملی که سیاست سیستم مانع آن می‌شود جلوی Action نوشته شده است. اکنون شما باید دسترسی به این عمل را برای سیستم به‌گونه‌ای تعریف کنید که دیگر نیاز به تایید هویت نباشد.</p>
<p>در اینجا عمل com.ubuntu.systemservice.setproxy مورد بحث است که از دسته اعمال com.ubuntu.systemservice است (کافیه بخش آخر را حذف کنیم تا بفهمیم دسته اعمال چیه).</p>
<p>تمام فایل‌های دسته اعمال در/usr/share/polkit-1/actions/ قرار دارند که با نام آن دسته به اضافه .policy همراه شده‌اند.</p>
<p>حالا فایل این دسته اعمال را باز می‌کنیم.</p>
<pre><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-sh" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>sudo gedit /usr/share/polkit-1/actions/com.ubuntu.systemservice.policy</span></code></pre></pre>
<p>در فایل باز شده عمل مورد نظر خود را پیدا می‌کنیم (در اینجا setproxy).</p>
<p><img src="/linuxiha/images/system_policy-3.png" alt="system_policy-3"/></p>
<p>خب حالا هر تغییری که دوست داریم روی تگ‌های داخل defaults انجام می‌دهیم. مثلا کافیست به‌جای no در تگ allow_inactive و به‌جای auth_admin_keep در تگ allow_active عبارت yes را بنویسیم (مانند تصویر زیر) تا دیگر برای تغییر پراکسی سیستم نیاز به اهراز هویت نداشته باشیم.</p>
<p><img src="/linuxiha/images/system_policy-4.png" alt="system_policy-4"/></p>
<ul>
<li>
<p>البته این تغییرات همیشه پیشنهاد نمی‌شود اما در برخی موارد که راحتی به امنیت ارجعیت دارد بسیار سودمند است.</p>
</li>
<li>
<p>این مطلب را بعد از خواند مطلبی با عنوان «نصب و حذف برنامه بدون وارد کردن گذرواژه» نوشتم که می‌توانید از آدرس mehdi.wordpress.com/2014/07/18/add-remove-software-without-password مطالعه کنید.</p>
</li>
</ul></section><div class="progress_root__9c0MC"><div class="MuiLinearProgress-root MuiLinearProgress-colorPrimary MuiLinearProgress-determinate" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"><div class="MuiLinearProgress-bar MuiLinearProgress-barColorPrimary MuiLinearProgress-bar1Determinate" style="transform:translateX(100%)"></div></div></div></div><nav id="navbar" class="menu_menu-container__g5R7v"><a class="menu_menu-item__EhBCd" href="/linuxiha"><img src="/linuxiha/icons/home.png" alt="home"/> <span>خانه</span> <aside></aside></a><a class="menu_menu-item__EhBCd" href="/linuxiha/news"><img src="/linuxiha/icons/news.png" alt="news"/> <span>خبری</span> <aside></aside></a><a class="menu_menu-item__EhBCd" href="/linuxiha/learning"><img src="/linuxiha/icons/article.png" alt="article"/> <span>آموزشی</span> <aside></aside></a><a class="menu_menu-item__EhBCd" href="/linuxiha/about"><img src="/linuxiha/icons/info.png" alt="info"/> <span>درباره ما</span> <aside></aside></a></nav></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"page":{"slug":"2014-08-03_ubuntu-edit-system-policy","layout":"post","jdate":"Sun Aug 03 2014 00:00:00 GMT+0000","user":"misam","title":"ویرایش system policy در اوبونتو","categories":["آموزشی"],"tags":["اوبونتو","حریم‌شخصی"],"featured":"system_policy-1.png","keywords":["system policy","system policy اوبونتو"],"description":"آموزش ویرایش system policy در اوبونتو","timeToRead":5,"content":"\nهمان‌طور که می‌دانید در لینوکس تمام کارهایی که امکان دارد به‌گونه‌ای تاثیر روی کل سیستم بگذارد محدود و فقط در دسترس کاربری روت است.\n\nدر مطلب «[sudo چیست؟](http://linuxihaa.ir/sudo)» به این مورد اشاره کردیم و گفتیم با دستوری مانند sudo در رابط خط‌فرمان می‌توان با کاربر عادی به این اعمال دسترسی داشت و در رابط گرافیکی نیز برنامه‌هایی در هر میزکار تعبیه شده‌اند که با نشان دادن کادرهای محاوره‌ای و درخواست رمز عبور، دسترسی به امکانات ممتاز سیستم را امکان پذیر می‌کنند.\n\nبه طور مثال هنگامی که قصد داریم پراکسی سیستم را در اوبونتو تغییر دهیم چون این یک عمل ممتاز در سیستم است کادر محاوره‌ای به شکل زیر باز شده و رمز کاربری را درخواست می‌کند.\n\n![system_policy-1](/linuxiha/images/system_policy-1.png)\n\nمشاهده می‌کنید که سیاست سیستم (system policy) پیغام داده که مانع انجام این کار می‌شود مگر این‌که رمز عبور را وارد کنید تا هویت شما تایید شود.\n\nخب اگر بخواهیم این پیغام‌ها نمایش داده نشود و برخی اعمالی که خودمان می‌دانیم زیاد خطرناک نیستند (همه اعمال را نباید باز گذاشت) را بدون تایید هویت انجام دهیم باید چکار کنیم؟!\n\nاول از همه گزینه Details در کادر را بزنید تا مشخصات این سیاست دیده شود.\n\n![system-policy-2](/linuxiha/images/system-policy-2.png)\n\nنام عملی که سیاست سیستم مانع آن می‌شود جلوی Action نوشته شده است. اکنون شما باید دسترسی به این عمل را برای سیستم به‌گونه‌ای تعریف کنید که دیگر نیاز به تایید هویت نباشد.\n\nدر اینجا عمل com.ubuntu.systemservice.setproxy مورد بحث است که از دسته اعمال com.ubuntu.systemservice است (کافیه بخش آخر را حذف کنیم تا بفهمیم دسته اعمال چیه).\n\nتمام فایل‌های دسته اعمال در/usr/share/polkit-1/actions/ قرار دارند که با نام آن دسته به اضافه .policy همراه شده‌اند.\n\nحالا فایل این دسته اعمال را باز می‌کنیم.\n\n```sh\nsudo gedit /usr/share/polkit-1/actions/com.ubuntu.systemservice.policy\n```\n\nدر فایل باز شده عمل مورد نظر خود را پیدا می‌کنیم (در اینجا setproxy).\n\n![system_policy-3](/linuxiha/images/system_policy-3.png)\n\nخب حالا هر تغییری که دوست داریم روی تگ‌های داخل defaults انجام می‌دهیم. مثلا کافیست به‌جای no در تگ allow_inactive و به‌جای auth_admin_keep در تگ allow_active عبارت yes را بنویسیم (مانند تصویر زیر) تا دیگر برای تغییر پراکسی سیستم نیاز به اهراز هویت نداشته باشیم.\n\n![system_policy-4](/linuxiha/images/system_policy-4.png)\n\n* البته این تغییرات همیشه پیشنهاد نمی‌شود اما در برخی موارد که راحتی به امنیت ارجعیت دارد بسیار سودمند است.\n\n* این مطلب را بعد از خواند مطلبی با عنوان «نصب و حذف برنامه بدون وارد کردن گذرواژه» نوشتم که می‌توانید از آدرس mehdi.wordpress.com/2014/07/18/add-remove-software-without-password مطالعه کنید."}},"__N_SSG":true},"page":"/articles/[slug]","query":{"slug":"2014-08-03_ubuntu-edit-system-policy"},"buildId":"UlrhO1Nrloe8puAi1Ej19","assetPrefix":"/linuxiha","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>